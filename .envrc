#!/usr/bin/env zsh

# TODO: Deprecate the use of Direnv in Staging+ environments
export PROJECT_ROOT=$(realpath $(dirname "${0:a:h}"))
export NODE_ENV="${NODE_ENV:-development}"

# Precedence should match this chart: https://github.com/bkeepers/dotenv?tab=readme-ov-file#customizing-rails
env_files=(
  "${PROJECT_ROOT}/.env.${NODE_ENV}"
  "${PROJECT_ROOT}/.env.${NODE_ENV}.local"
)

for env_file in "${env_files[@]}"; do
  if [[ -f "$env_file" ]]; then
    echo "üõ†Ô∏è Loading $env_file"
    source "$env_file"
  fi
done
