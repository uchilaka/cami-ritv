#!/usr/bin/env zsh

SCRIPT_PATH=$(dirname "${0:a}")

source "$SCRIPT_PATH"/initialize

if [[ -z "$APP_POSTGRES_DATA_DIR" ]]; then
  echo "No PostgreSQL server data available. Checked @ $APP_POSTGRES_DATA_DIR. Exiting."
  exit 0
else
  # Stop the PostgreSQL server
  pg_ctl --pgdata="${APP_POSTGRES_DATA_DIR}" \
    --log="${APP_POSTGRES_LOG_FILE}" \
    --mode=fast --no-wait restart
fi
